<mat-tab-group mat-align-tabs="start">
  <mat-tab label="General">
    <!-- <mat-progress-bar mode="determinate" value="40"></mat-progress-bar> -->
    <div *ngIf="accessions$.length > 0" class="container">
      <mat-card class="mt-2 mb-2">
        <mat-card-header>
          <mat-card-title>Accessions list found</mat-card-title>
        </mat-card-header>
        <div
          class=""
          style="width: 100%; display: flex; justify-content: flex-end"
        >
          <button
            mat-button
            (click)="downloadCsvFormat(accessions$)"
            style="color: #3f51b5"
          >
            <i class="fas fa-file-csv"></i> Download csv
          </button>
          <button
            mat-button
            (click)="downloadJsonFormat(accessions$)"
            style="color: #3f51b5"
          >
            <i class="fab fa-js"></i> Download json
          </button>
        </div>
        <table class="table table-striped">
          <thead>
            <tr>
              <th
                scope="col"
                *ngFor="let header of headers"
                style="text-align: center"
              >
                {{ header }}
              </th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="
                let value of accessions$
                  | paginate: { itemsPerPage: 5, currentPage: ActualPage }
              "
              style="cursor: pointer; cursor: hand; text-align: center;"
              (click)="openAccessionDetail(value)"
            >
              <td>{{ value.number }}</td>
              <td>{{ value.crop }}</td>
              <td>{{ value.taxonomy_taxon_name }}</td>
              <td><button mat-stroked-button>See more</button></td>
            </tr>
          </tbody>
        </table>
        <pagination-controls (pageChange)="ActualPage = $event">
        </pagination-controls>
        <!-- <div class="page-buttons">
        <button class="btn prev" (click)="fetchPrevious()">Prev
        </button>
        <button class="btn next" (click)="fetchNext()">Next
        </button>
      </div> -->
        <br />
        <p style="text-align: left">
          Number of accessions found: {{ amountData | number: '2.' }}
        </p>
      </mat-card>

      <mat-card  class="mt-2 mb-2">
        <mat-card-header>
          <mat-card-title>Accessions location</mat-card-title>
        </mat-card-header>
        <map-outcomes [acce]="accessions$"></map-outcomes>
      </mat-card>
    </div>
  </mat-tab>
  <mat-tab>
    <ng-template mat-tab-label>
      <span (click)="buildSubsets()" >Subsets</span>
    </ng-template>
    <table-outcomes [params]="subsets"></table-outcomes>
  </mat-tab>
<!--   <mat-tab label="Accessions">
    <table-outcomes [params]="params"></table-outcomes>
  </mat-tab> -->
  <mat-tab>
    <ng-template mat-tab-label>
      <span (click)="buildQuantilePlots()">Plots</span>
    </ng-template>
    <app-plot-outcomes [quantileData]="quantileData"></app-plot-outcomes>
  </mat-tab>
  <mat-tab>
    <ng-template mat-tab-label>
      <span >Cluster</span>
    </ng-template>
    <div style="width: 100%" class="mt-2 mr-2 advance-properties">
      <mat-card>
      <div class="" style="width: 48%">
        <mat-checkbox class="example-margin" [checked]="dbscanCheck" [(ngModel)]="dbscanCheck"  color="primary"> Dbscan method <i matTooltip="Info about the action" class="fas fa-question-circle"></i></mat-checkbox>
      </div>
      <div class="" style="display: flex; width: 100%" [hidden]="!dbscanCheck">
        <div style="width: 48%">
          <label for="minpts">MinPts</label>
          <input type="number" class="form-control" [ngModel]="hyperParameters.minpts"/>
        </div>
        <div class="ml-2" style="width: 48%">
          <label for="eps">Epsilon</label>
          <input type="number" class="form-control" [ngModel]="hyperParameters.epsilon" />
        </div>
      </div>
    </mat-card>
    <mat-card class="mt-3">
      <div  style="width: 48%">
        <mat-checkbox  class="example-margin" [checked]="hdbscanCheck" [(ngModel)]="hdbscanCheck" color="primary">Hdbscan method <i matTooltip="Info about the action" class="fas fa-question-circle"></i></mat-checkbox>
      </div>
      <div class="" style="display: flex; width: 100%" [hidden]="!hdbscanCheck">
        <div style="width: 90%">
          <label for="min-cluster-size">Minimum cluster size</label>
          <input type="number" class="form-control" [ngModel]="hyperParameters.min_cluster_size"/>
        </div>
      </div>
    </mat-card>
    <mat-card class="mt-3">
      <div  style="width: 48%">
        <mat-checkbox class="example-margin" [checked]="agglomerativeCheck" [(ngModel)]="agglomerativeCheck" color="primary">Agglomerative method <i matTooltip="Info about the action" class="fas fa-question-circle"></i></mat-checkbox>
      </div>
      <div class="" style="display: flex; width: 100%" [hidden]="!agglomerativeCheck">
        <div style="width: 100%">
          <label for="n-clusters">Numbers of clusters</label>
          <input type="number" class="form-control" [ngModel]="hyperParameters.n_clusters" />
        </div>
      </div>
    </mat-card>
    </div>
    <button class="btn btn-green mt-3" (click)="buildClusters()">
      Generate clusters
    </button>
    <app-multivariable-analysis [multivariable]="clusterData"></app-multivariable-analysis>
  </mat-tab>
  <mat-tab label="Summary">
    <app-summary></app-summary>
  </mat-tab>
</mat-tab-group>
